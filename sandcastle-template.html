<!DOCTYPE html>

<html lang="en">

<head>

  <meta charset="utf-8">

  <!-- Include the CesiumJS JavaScript and CSS files -->

  <script src="https://cesium.com/downloads/cesiumjs/releases/1.133/Build/Cesium/Cesium.js"></script>

  <link href="https://cesium.com/downloads/cesiumjs/releases/1.133/Build/Cesium/Widgets/widgets.css" rel="stylesheet">
  
  <style>
    #toolbar {
      position: absolute;
      top: 10px;
      left: 10px;
      background: rgba(42, 42, 42, 0.8);
      padding: 10px;
      border-radius: 5px;
      z-index: 100;
    }
    
    #modelSelect {
      background: #444;
      color: white;
      border: 1px solid #666;
      border-radius: 3px;
      padding: 5px;
      font-family: sans-serif;
      font-size: 14px;
    }
    
    #modelSelect option {
      background: #444;
      color: white;
    }
  </style>

</head>

<body>

  <div id="cesiumContainer"></div>
  
  <div id="toolbar">
    <select id="modelSelect">
      <option value="">Select a Model</option>
    </select>
  </div>

  <script type="module">
    // Your access token can be found at: https://ion.cesium.com/tokens.
    // Access token from config.json

    Cesium.Ion.defaultAccessToken = '{{CESIUM_TOKEN}}';

    // Initialize the Cesium Viewer with model-focused settings
    const viewer = new Cesium.Viewer("cesiumContainer", {
      infoBox: false,
      selectionIndicator: false,
      shadows: true,
      shouldAnimate: true,
    });

    function createModel(url, height) {
      viewer.entities.removeAll();

      const position = Cesium.Cartesian3.fromDegrees(
        -123.0744619,
        44.0503706,
        height,
      );
      const heading = Cesium.Math.toRadians(135);
      const pitch = 0;
      const roll = 0;
      const hpr = new Cesium.HeadingPitchRoll(heading, pitch, roll);
      const orientation = Cesium.Transforms.headingPitchRollQuaternion(position, hpr);

      const entity = viewer.entities.add({
        name: url,
        position: position,
        orientation: orientation,
        model: {
          uri: url,
          minimumPixelSize: 128,
          maximumScale: 20000,
        },
      });
      viewer.trackedEntity = entity;
    }

    const options = [
      {
        text: "F-35",
        onselect: function () {
          createModel("assets/f-35b_lightning_ii.glb", 10000.0);
        },
      },
      {
        text: "J-20",
        onselect: function () {
          createModel("assets/chengdu_j-20_fighter_v2.glb", 10000.0);
        },
      },
      {
        text: "Instanced Box",
        onselect: function () {
          createModel("../SampleData/models/BoxInstanced/BoxInstanced.gltf", 15);
        },
      },
    ];

    // Populate dropdown and handle selection
    const modelSelect = document.getElementById('modelSelect');
    
    options.forEach((option, index) => {
      const optionElement = document.createElement('option');
      optionElement.value = index;
      optionElement.text = option.text;
      modelSelect.appendChild(optionElement);
    });

    modelSelect.addEventListener('change', function() {
      const selectedIndex = parseInt(this.value);
      if (!isNaN(selectedIndex) && options[selectedIndex]) {
        options[selectedIndex].onselect();
      }
    });

  </script>

 </div>

</body>

</html>

